from typing import Dict, Literal, Callable, Any


# 全局常量定义

# ui
# 常见字符宽度映射表(键为字体名称，值为字符到宽度比例的映射)(全角字符宽度为100)
CHAR_WIDTH_MAPS = {
    '': {
        # 基础ASCII字符
        'a': 60, 'b': 60, 'c': 55, 'd': 60, 'e': 55,
        'f': 40, 'g': 60, 'h': 60, 'i': 30, 'j': 35,
        'k': 55, 'l': 30, 'm': 80, 'n': 60, 'o': 60,
        'p': 60, 'q': 60, 'r': 45, 's': 55, 't': 40,
        'u': 60, 'v': 55, 'w': 75, 'x': 55, 'y': 55, 'z': 55,
        'A': 70, 'B': 70, 'C': 70, 'D': 75, 'E': 65,
        'F': 60, 'G': 75, 'H': 75, 'I': 35, 'J': 55,
        'K': 70, 'L': 60, 'M': 90, 'N': 75, 'O': 75,
        'P': 65, 'Q': 75, 'R': 70, 'S': 65, 'T': 65,
        'U': 75, 'V': 70, 'W': 95, 'X': 70, 'Y': 70, 'Z': 65,
        '0': 65, '1': 65, '2': 65, '3': 65, '4': 65,
        '5': 65, '6': 65, '7': 65, '8': 65, '9': 65,
        # 常用符号
        ' ': 30, '!': 30, '"': 40, '#': 65, '$': 65,
        '%': 80, '&': 70, "'": 20, '(': 40, ')': 40,
        '*': 50, '+': 60, ',': 30, '-': 40, '.': 30,
        '/': 40, ':': 30, ';': 30, '<': 60, '=': 60,
        '>': 60, '?': 60, '@': 90, '[': 40, '\\': 40,
        ']': 40, '^': 50, '_': 60, '`': 30, '{': 50,
        '|': 30, '}': 50, '~': 60,
        # 中文标点
        '，': 60, '。': 60, '！': 60, '？': 60, '：': 60,
        '；': 60, '“': 60, '”': 60, '‘': 40, '’': 40,
        '（': 60, '）': 60, '【': 60, '】': 60, '《': 60,
        '》': 60, '…': 120, '—': 120, '、': 30, '·': 30,
    },
    'vivo': {
        # 基础ASCII字符
        'a': 53, 'b': 60, 'c': 55, 'd': 60, 'e': 55,
        'f': 40, 'g': 60, 'h': 60, 'i': 30, 'j': 35,
        'k': 55, 'l': 30, 'm': 80, 'n': 60, 'o': 60,
        'p': 60, 'q': 60, 'r': 45, 's': 55, 't': 40,
        'u': 60, 'v': 55, 'w': 75, 'x': 55, 'y': 55, 'z': 55,
        'A': 70, 'B': 70, 'C': 70, 'D': 75, 'E': 65,
        'F': 60, 'G': 75, 'H': 75, 'I': 35, 'J': 55,
        'K': 70, 'L': 60, 'M': 90, 'N': 75, 'O': 75,
        'P': 65, 'Q': 75, 'R': 70, 'S': 65, 'T': 65,
        'U': 75, 'V': 70, 'W': 95, 'X': 70, 'Y': 70, 'Z': 65,
        '0': 65, '1': 65, '2': 65, '3': 65, '4': 65,
        '5': 65, '6': 65, '7': 65, '8': 65, '9': 65,
        # 常用符号
        ' ': 30, '!': 30, '"': 40, '#': 65, '$': 65,
        '%': 80, '&': 70, "'": 20, '(': 40, ')': 40,
        '*': 46, '+': 64, ',': 23, '-': 44, '.': 25,
        '/': 35, ':': 25, ';': 30, '<': 64, '=': 66,
        '>': 64, '?': 48, '@': 92, '[': 35, '\\': 46,
        ']': 35, '^': 64, '_': 46, '`': 21, '{': 35,
        '|': 30, '}': 35, '~': 64,
        # 中文标点
        '，': 100, '。': 100, '！': 100, '？': 100, '：': 100,
        '；': 100, '“': 41, '”': 41, '‘': 23, '’': 23,
        '（': 63, '）': 63, '【': 63, '】': 63, '《': 76,
        '》': 76, '…': 100, '—': 100, '、': 100, '·': 50,
    },
    'mi': {},
    'samsung': {},
}
# 中文字符范围
CHINESE_CHAR_RANGE = [
    (0x4E00, 0x9FFF),  # CJK统一表意文字
    (0x3400, 0x4DBF),  # CJK扩展A
    (0x20000, 0x2A6DF), # CJK扩展B
    (0x2A700, 0x2B73F), # CJK扩展C
    (0x2B740, 0x2B81F), # CJK扩展D
    (0x2B820, 0x2CEAF), # CJK扩展E
]
# 全角字符范围
FULL_WIDTH_CHAR_RANGE = CHINESE_CHAR_RANGE + [
    (0xFF00, 0xFFEF),  # 全角符号(包括全角ASCII字符)
    (0x2600, 0x26FF),  # 杂项符号(如天气符号、星号等)
    (0x2700, 0x27BF),  # 装饰符号(如心形、箭头等)
    (0x1F300, 0x1F5FF),  # 象形文字(如交通工具、食物等)
    (0x1F600, 0x1F64F),  # Emoji表情(面部表情、手势等)
    (0x1F680, 0x1F6FF),  # 交通和地图符号(如汽车、飞机等)
]

# setting
DL = 'dictlike'  # 字典类型的标识符
CL = 'class'     # 类类型的标识符
MD = 'module'    # 模块类型的标识符




# UI配置
ui_width = 2000  # 默认UI显示宽度（单位：全角字符/100）
is_equal_width_font = True  # 是否使用等宽字体的标志
font = ''  # 当前使用的字体名称


# input配置
# 输入动作映射表(键为用户输入的命令，值为对应的处理函数)
input_act: Dict[str, Callable[[], Any]] = {}


# setting配置
namespace = globals()  # 获取当前全局符号表


# number配置
unit_type: Literal['en', 'zh1', 'zh2'] = 'zh1'




class GameOver(Exception):
    """游戏结束异常，用于终止游戏循环"""
    pass

class PermissionDenied(Exception):
    """权限拒绝异常，表示操作未被授权"""
    pass
