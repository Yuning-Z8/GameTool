from typing import Dict, Callable, Any


# 全局常量定义
INF = 2147483647  # 表示无穷大的整数值，为32位有符号整数的最大值


# UI配置
ui_width = 20  # 默认UI显示宽度（单位：全角字符）
is_equal_width_font = True  # 是否使用等宽字体的标志
font = ''  # 当前使用的字体名称

# 常见字符宽度映射表（非等宽字体）
# 键为字体名称，值为字符到宽度比例的映射
# 宽度比例表示相对于全角字符(宽度为1.0)的显示宽度
CHAR_WIDTH_MAPS = {
    '': {
        # 基础ASCII字符
        'a': 0.6, 'b': 0.6, 'c': 0.55, 'd': 0.6, 'e': 0.55,
        'f': 0.4, 'g': 0.6, 'h': 0.6, 'i': 0.3, 'j': 0.35,
        'k': 0.55, 'l': 0.3, 'm': 0.8, 'n': 0.6, 'o': 0.6,
        'p': 0.6, 'q': 0.6, 'r': 0.45, 's': 0.55, 't': 0.4,
        'u': 0.6, 'v': 0.55, 'w': 0.75, 'x': 0.55, 'y': 0.55, 'z': 0.55,
        'A': 0.7, 'B': 0.7, 'C': 0.7, 'D': 0.75, 'E': 0.65,
        'F': 0.6, 'G': 0.75, 'H': 0.75, 'I': 0.35, 'J': 0.55,
        'K': 0.7, 'L': 0.6, 'M': 0.9, 'N': 0.75, 'O': 0.75,
        'P': 0.65, 'Q': 0.75, 'R': 0.7, 'S': 0.65, 'T': 0.65,
        'U': 0.75, 'V': 0.7, 'W': 0.95, 'X': 0.7, 'Y': 0.7, 'Z': 0.65,
        '0': 0.65, '1': 0.65, '2': 0.65, '3': 0.65, '4': 0.65,
        '5': 0.65, '6': 0.65, '7': 0.65, '8': 0.65, '9': 0.65,
        # 常用符号
        ' ': 0.3, '!': 0.3, '"': 0.4, '#': 0.65, '$': 0.65,
        '%': 0.8, '&': 0.7, "'": 0.2, '(': 0.4, ')': 0.4,
        '*': 0.5, '+': 0.6, ',': 0.3, '-': 0.4, '.': 0.3,
        '/': 0.4, ':': 0.3, ';': 0.3, '<': 0.6, '=': 0.6,
        '>': 0.6, '?': 0.6, '@': 0.9, '[': 0.4, '\\': 0.4,
        ']': 0.4, '^': 0.5, '_': 0.6, '`': 0.3, '{': 0.5,
        '|': 0.3, '}': 0.5, '~': 0.6,
        # 中文标点
        '，': 0.6, '。': 0.6, '！': 0.6, '？': 0.6, '：': 0.6,
        '；': 0.6, '“': 0.6, '”': 0.6, '‘': 0.4, '’': 0.4,
        '（': 0.6, '）': 0.6, '【': 0.6, '】': 0.6, '《': 0.6,
        '》': 0.6, '…': 1.2, '—': 1.2, '、': 0.3, '·': 0.3,
    },
    'vivo': {},
    'mi': {},
    'samsung': {},
}

# 中文字符范围
CHINESE_CHAR_RANGE = [
    (0x4E00, 0x9FFF),  # CJK统一表意文字
    (0x3400, 0x4DBF),  # CJK扩展A
    (0x20000, 0x2A6DF), # CJK扩展B
    (0x2A700, 0x2B73F), # CJK扩展C
    (0x2B740, 0x2B81F), # CJK扩展D
    (0x2B820, 0x2CEAF), # CJK扩展E
]

# 全角字符范围
FULL_WIDTH_CHAR_RANGE = CHINESE_CHAR_RANGE + [
    (0xFF00, 0xFFEF),  # 全角符号(包括全角ASCII字符)
    (0x2600, 0x26FF),  # 杂项符号(如天气符号、星号等)
    (0x2700, 0x27BF),  # 装饰符号(如心形、箭头等)
    (0x1F300, 0x1F5FF),  # 象形文字(如交通工具、食物等)
    (0x1F600, 0x1F64F),  # Emoji表情(面部表情、手势等)
    (0x1F680, 0x1F6FF),  # 交通和地图符号(如汽车、飞机等)
]


# input配置
# 输入动作映射表
# 键为用户输入的命令，值为对应的处理函数
input_act: Dict[str, Callable[[], Any]] = {}

# setting配置
namespace = globals()  # 获取当前全局符号表
DL = 'dictlike'  # 字典类型的标识符
CL = 'class'     # 类类型的标识符
MD = 'module'    # 模块类型的标识符


class GameOver(Exception):
    """游戏结束异常，用于终止游戏循环"""
    pass

class PermissionDenied(Exception):
    """权限拒绝异常，表示操作未被授权"""
    pass
